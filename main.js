(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.items,o=e.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var n,r;return n=t,(r=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"addUserItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._keyEscape="Escape",this._handleEscClose=this._handleEscClose.bind(this),this._popup=document.querySelector(this._popupSelector)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close-button"))&&e.close()}))}},{key:"_handleEscClose",value:function(e){e.code===this._keyEscape&&this.close()}}])&&n(t.prototype,r),e}();function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,o,l=(r=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(r);if(o){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=l.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupText=t._popup.querySelector(".popup__imagetext"),t}return t=p,(n=[{key:"open",value:function(e,t){u(a(p.prototype),"open",this).call(this),this._popupImage.src=t,this._popupText.textContent=e,this._popupImage.setAttribute("alt",e)}}])&&i(t.prototype,n),p}(r);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitFormCallback=t,n._form=n._popup.querySelector(".popup__form"),n}return t=u,(n=[{key:"close",value:function(){_(h(u.prototype),"close",this).call(this),this._form.reset()}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._popup.querySelectorAll(".popup__field"),this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;_(h(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitFormCallback(e._getInputValues())}))}}])&&f(t.prototype,n),u}(r);function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameUserSelector=t.nameUserSelector,this._jobUserSelector=t.jobUserSelector,this._userData={},this._nameUserElement=document.querySelector(this._nameUserSelector),this._jobUserElement=document.querySelector(this._jobUserSelector)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userData.name=this._nameUserElement.textContent,this._userData.job=this._jobUserElement.textContent,this._userData}},{key:"setUserInfo",value:function(e,t){this._nameUserElement.textContent=e,this._jobUserElement.textContent=t}}])&&v(t.prototype,n),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._cardSelector=n,this._handleImageClick=r,this._element=this._getTemplate(this._cardSelector),this._image=this._element.querySelector(".card__image"),this._cardLike=this._element.querySelector(".card__like"),this._deleteButton=this._element.querySelector(".card__trash")}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"createCard",value:function(){return this._element.querySelector(".card__header").textContent=this._name,this._image.setAttribute("src",this._link),this._image.setAttribute("alt",this._name),this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._image.addEventListener("click",(function(){e._handleImageClick(e._name,e._link)})),this._cardLike.addEventListener("click",(function(e){e.target.classList.toggle("card__like_active")})),this._deleteButton.addEventListener("click",(function(e){e.target.closest(".card").remove()}))}}])&&S(t.prototype,n),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k(this,"_isValid",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),k(this,"_showInputError",(function(e,t){var n=r._form.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputErrorClass),n.textContent=t,n.classList.add(r._errorClass)})),k(this,"_hideInputError",(function(e){var t=r._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputErrorClass),t.classList.remove(r._errorClass),t.textContent=""})),k(this,"_setEventListeners",(function(){r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._isValid(e),r._toggleButtonState()}))}))})),k(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),k(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r.disableSubmitButton():(r._buttonElement.classList.remove(r._inactiveButtonClass),r._buttonElement.removeAttribute("disabled"))})),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(this._form)}},{key:"disableSubmitButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}}])&&E(t.prototype,n),e}(),C={formSelector:".popup__form",inputSelector:".popup__field",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__field_type_error",errorClass:"popup__error_visible"},j=document.querySelector(".popup_edit"),L=document.querySelector(".popup_add"),q=document.querySelector(".popup_preview"),O=document.querySelector(".profile__edit-button"),I=document.querySelector(".profile__add-button"),P=document.querySelector(".popup__field_input_name"),x=document.querySelector(".popup__field_input_job"),B=(j.querySelector(".popup__close-button"),L.querySelector(".popup__close-button"),q.querySelector(".popup__close-button"),document.querySelector(".profile__title"),document.querySelector(".profile__subtitle"),document.querySelector(".popup__image"),document.querySelector(".popup__imagetext"),document.forms.editProfileForm,document.forms.addCardForm,document.querySelector(".item-template").content,document.querySelector(".cards"),document.querySelector(".popup__create-button"),document.querySelector(".popup__field_input_place"),document.querySelector(".popup__field_input_url"),document.querySelector(".page"),function(e){return new g(e,".item-template",(function(e,t){R.open(e,t)})).createCard()}),U=new t({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){U.addItem(B(e))}},".cards");U.renderItems();var R=new l(".popup_preview");R.setEventListeners();var T=new y(".popup_edit",(function(e){A.setUserInfo(e.nameValue,e.jobValue),T.close()}));T.setEventListeners();var V=new y(".popup_add",(function(e){V.close(),e.name=e.placeValue,e.link=e.urlValue,U.addUserItem(B(e))}));V.setEventListeners();var A=new b({nameUserSelector:".profile__title",jobUserSelector:".profile__subtitle"});O.addEventListener("click",(function(){var e=A.getUserInfo();P.value=e.name,x.value=e.job,T.open()})),I.addEventListener("click",(function(){V.open()})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault(),t.disableSubmitButton()}));var t=new w(C,e);t.enableValidation(),t.disableSubmitButton()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJ0aGlzIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmQiLCJmb3JFYWNoIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX2tleUVzY2FwZSIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfcG9wdXAiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiY2xvc2UiLCJjb2RlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRleHQiLCJuYW1lIiwibGluayIsInNyYyIsInRleHRDb250ZW50Iiwic2V0QXR0cmlidXRlIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEZvcm1DYWxsYmFjayIsIl9zdWJtaXRGb3JtQ2FsbGJhY2siLCJfZm9ybSIsInJlc2V0IiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlVzZXJJbmZvIiwidXNlcklucHV0U2VsZWN0b3IiLCJfbmFtZVVzZXJTZWxlY3RvciIsIm5hbWVVc2VyU2VsZWN0b3IiLCJfam9iVXNlclNlbGVjdG9yIiwiam9iVXNlclNlbGVjdG9yIiwiX3VzZXJEYXRhIiwiX25hbWVVc2VyRWxlbWVudCIsIl9qb2JVc2VyRWxlbWVudCIsImpvYiIsIm5hbWVWYWx1ZSIsImpvYlZhbHVlIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2ltYWdlIiwiX2NhcmRMaWtlIiwiX2RlbGV0ZUJ1dHRvbiIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0b2dnbGUiLCJjbG9zZXN0IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJpbnB1dFNlbGVjdG9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJpbnB1dEVsZW1lbnQiLCJfaXNWYWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl9idXR0b25FbGVtZW50IiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXJyYXkiLCJmcm9tIiwicG9wdXBFZGl0IiwicG9wdXBBZGQiLCJwb3B1cFByZXZpZXciLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJjcmVhdGVOZXdDYXJkIiwiZm9ybXMiLCJlZGl0UHJvZmlsZUZvcm0iLCJhZGRDYXJkRm9ybSIsInByZXZpZXdQb3B1cCIsIm9wZW4iLCJjcmVhdGVDYXJkIiwiZGVmYXVsdENhcmRMaXN0IiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlZGl0UG9wdXAiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiYWRkUG9wdXAiLCJwbGFjZVZhbHVlIiwidXJsVmFsdWUiLCJhZGRVc2VySXRlbSIsImN1cnJlbnRVc2VySW5mbyIsImdldFVzZXJJbmZvIiwiZm9ybUVsZW1lbnQiLCJmb3JtVmFsaWRhdGUiLCJlbmFibGVWYWxpZGF0aW9uIl0sIm1hcHBpbmdzIjoiNkxBQXFCQSxFLFdBQ2pCLGFBQWlDQyxHQUFtQixJQUF0Q0MsRUFBc0MsRUFBdENBLE1BQU9DLEVBQStCLEVBQS9CQSxVLDRGQUErQixTQUNoREMsS0FBS0MsZUFBaUJILEVBQ3RCRSxLQUFLRSxVQUFZSCxFQUNqQkMsS0FBS0csV0FBYUMsU0FBU0MsY0FBY1IsRyw0Q0FHN0MsU0FBUVMsR0FDSk4sS0FBS0csV0FBV0ksT0FBT0QsSyx5QkFHM0IsU0FBWUEsR0FDUk4sS0FBS0csV0FBV0ssUUFBUUYsSyx5QkFHNUIsV0FBYyxXQUNWTixLQUFLQyxlQUFlUSxTQUFRLFNBQUFDLEdBQUksT0FBSSxF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QUFNLGtGQ0ZaakMsU0FBVSxTQUFDVyxHQUNUbUgsRUFBZ0JDLFFBQVFSLEVBQWM1RyxNQUNwQyxVQUNObUgsRUFBZ0JFLGNBR2hCLElBQU1MLEVBQWUsSUFBSTlGLEVBQWUsa0JBQ3hDOEYsRUFBYU0sb0JBRWIsSUFBTUMsRUFBWSxJQUFJN0YsRUFBYyxlQVVwQyxTQUFrQ3lCLEdBQ2hDcUUsRUFBU0MsWUFBWXRFLEVBQUtILFVBQVdHLEVBQUtGLFVBQzFDc0UsRUFBVXZHLFdBWFp1RyxFQUFVRCxvQkFFVixJQUFNSSxFQUFXLElBQUloRyxFQUFjLGNBYW5DLFNBQWlDeUIsR0FDL0J1RSxFQUFTMUcsUUFDVG1DLEVBQUs5QixLQUFPOEIsRUFBS3dFLFdBQ2pCeEUsRUFBSzdCLEtBQU82QixFQUFLeUUsU0FDakJULEVBQWdCVSxZQUFZakIsRUFBY3pELE9BaEI1Q3VFLEVBQVNKLG9CQUdULElBQU1FLEVBQVcsSUFBSWxGLEVESFksQ0FDN0JHLGlCQUFrQixrQkFDbEJFLGdCQUFpQix1QkNtQnJCNkQsRUFBVzlGLGlCQUFpQixTQUFTLFdBQ25DLElBQU1vSCxFQUFrQk4sRUFBU08sY0FDakNyQixRQUFrQm9CLEVBQWdCekcsS0FDbENzRixRQUFpQm1CLEVBQWdCL0UsSUFDakN3RSxFQUFVTixVQUlaUixFQUFVL0YsaUJBQWlCLFNBQVMsV0FDbENnSCxFQUFTVCxVQUlNZCxNQUFNQyxLQUFLMUcsU0FBU3NDLGlCQUFpQixpQkFDN0NqQyxTQUFRLFNBQUNpSSxHQUNoQkEsRUFBWXRILGlCQUFpQixVQUFVLFNBQVVHLEdBQy9DQSxFQUFJdUIsaUJBQ0o2RixFQUFhMUMseUJBRWYsSUFBTTBDLEVBQWUsSUFBSTdELEVBQWNDLEVBQVEyRCxHQUMvQ0MsRUFBYUMsbUJBQ2JELEVBQWExQywwQiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgICB9XG5cbiAgICBhZGRVc2VySXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKCkge1xuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSlcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2tleUVzY2FwZSAgPSAnRXNjYXBlJztcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXBTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgICAgICAgICBpZiAoZXZ0LmNvZGUgPT09IHRoaXMuX2tleUVzY2FwZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbiAgICAgICAgdGhpcy5fcG9wdXBUZXh0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZXRleHQnKTtcbiAgICB9XG5cbiAgICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgICAgIHRoaXMuX3BvcHVwVGV4dC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCBuYW1lKTtcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEZvcm1DYWxsYmFjaykge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fc3VibWl0Rm9ybUNhbGxiYWNrID0gc3VibWl0Rm9ybUNhbGxiYWNrO1xuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19maWVsZCcpO1xuICAgICAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT5cbiAgICAgICAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRGb3JtQ2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IodXNlcklucHV0U2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fbmFtZVVzZXJTZWxlY3RvciA9IHVzZXJJbnB1dFNlbGVjdG9yLm5hbWVVc2VyU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2pvYlVzZXJTZWxlY3RvciA9IHVzZXJJbnB1dFNlbGVjdG9yLmpvYlVzZXJTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fdXNlckRhdGEgPSB7fTtcbiAgICAgICAgdGhpcy5fbmFtZVVzZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9uYW1lVXNlclNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fam9iVXNlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2pvYlVzZXJTZWxlY3RvcilcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgdGhpcy5fdXNlckRhdGEubmFtZSA9IHRoaXMuX25hbWVVc2VyRWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgdGhpcy5fdXNlckRhdGEuam9iID0gdGhpcy5fam9iVXNlckVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVxuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKG5hbWVWYWx1ZSwgam9iVmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbmFtZVVzZXJFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZVZhbHVlO1xuICAgICAgICB0aGlzLl9qb2JVc2VyRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYlZhbHVlO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKHRoaXMuX2NhcmRTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgICAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKTtcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdHJhc2gnKTtcbiAgICB9XG5cbiAgICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgICAgICAgIC5jb250ZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmNhcmQnKVxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICAgIH1cblxuICAgIGNyZWF0ZUNhcmQoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2hlYWRlcicpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLl9saW5rKTtcbiAgICAgICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCB0aGlzLl9uYW1lKTtcblxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9jYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgZXZ0LnRhcmdldC5jbG9zZXN0KCcuY2FyZCcpLnJlbW92ZSgpO1xuICAgICAgICB9KVxuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm0pIHtcbiAgICAgICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gY29uZmlnLmZvcm1TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgICAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIF9pc1ZhbGlkID0gKGlucHV0U2VsZWN0b3IpID0+IHtcbiAgICAgICAgaWYgKCFpbnB1dFNlbGVjdG9yLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dFNlbGVjdG9yLCBpbnB1dFNlbGVjdG9yLnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0U2VsZWN0b3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0U2VsZWN0b3IsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0U2VsZWN0b3IuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0U2VsZWN0b3IuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIH1cblxuICAgIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dFNlbGVjdG9yKSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRTZWxlY3Rvci5pZH0tZXJyb3JgKTtcbiAgICAgICAgaW5wdXRTZWxlY3Rvci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIC8vINC00L7QsdCw0LLQu9C10L3QuNC1INC60LDQttC00L7QvNGDINC/0L7Qu9GOINC+0LHRgNCw0LHQvtGC0YfQuNC60LAg0YHQvtCx0YvRgtC40Y8gaW5wdXRcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyDQv9GA0L7QstC10YDQutCwINC90LAg0LLQsNC70LjQtNC90L7RgdGC0YxcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1ZhbGlkKGlucHV0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgLy8g0LjQt9C80LXQvdC10L3QuNC1INGB0L7RgdGC0L7Rj9C90LjRjyDQsNC60YLQuNCy0L3QvtGB0YLQuCDQutC90L7Qv9C60Lgg0YTQvtGA0LzRi1xuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKHRoaXMuX2Zvcm0pO1xuICAgIH1cblxuICAgIC8vINCk0YPQvdC60YbQuNGPINC/0YDQuNC90LjQvNCw0LXRgiDQvNCw0YHRgdC40LIg0L/QvtC70LXQuVxuICAgIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAvLyDQldGB0LvQuCDQv9C+0LvQtSDQvdC1INCy0LDQu9C40LTQvdC+LCDQutC+0LvQsdGN0Log0LLQtdGA0L3RkdGCIHRydWVcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgICAgICB9KVxuICAgIH1cblxuLy8g0KTRg9C90LrRhtC40Y8g0L/RgNC40L3QuNC80LDQtdGCINC80LDRgdGB0LjQsiDQv9C+0LvQtdC5INCy0LLQvtC00LBcbi8vINC4INGN0LvQtdC80LXQvdGCINC60L3QvtC/0LrQuCwg0YHQvtGB0YLQvtGP0L3QuNC1INC60L7RgtC+0YDQvtC5INC90YPQttC90L4g0LzQtdC90Y/RgtGMXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIH1cbn0iLCJleHBvcnQgY29uc3QgY29uZmlnID0ge1xuICAgIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG4gICAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9fZmllbGQnLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24nLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uX2Rpc2FibGVkJyxcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9fZmllbGRfdHlwZV9lcnJvcicsXG4gICAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvcl92aXNpYmxlJ1xufTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjCcsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcbiAgICB9XG4gICAgLFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9CR0LDQudC60LDQuycsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZydcbiAgICB9XG5dO1xuXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2VkaXQnKTtcbmV4cG9ydCBjb25zdCBwb3B1cEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9hZGQnKTtcbmV4cG9ydCBjb25zdCBwb3B1cFByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfcHJldmlldycpO1xuZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZmllbGRfaW5wdXRfbmFtZScpO1xuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWVsZF9pbnB1dF9qb2InKTtcbmV4cG9ydCBjb25zdCB1c2VySW5wdXRTZWxlY3RvciA9IHtcbiAgICBuYW1lVXNlclNlbGVjdG9yOiAnLnByb2ZpbGVfX3RpdGxlJyxcbiAgICBqb2JVc2VyU2VsZWN0b3I6ICcucHJvZmlsZV9fc3VidGl0bGUnXG59O1xuXG4vLyDQstGA0LXQvNC10L3QvdC+INC90LXQuNGB0L/QvtC70YzQt9GD0LXQvNGL0LUg0L/QtdGA0LXQvNC10L3QvdGL0LVcbmV4cG9ydCBjb25zdCBjbG9zZUJ1dHRvbkVkaXQgPSBwb3B1cEVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBjbG9zZUJ1dHRvbkFkZCA9IHBvcHVwQWRkLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgY2xvc2VCdXR0b25QcmV2aWV3ID0gcG9wdXBQcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZVN1YnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3N1YnRpdGxlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbmV4cG9ydCBjb25zdCBwb3B1cFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdldGV4dCcpO1xuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zLmVkaXRQcm9maWxlRm9ybTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zLmFkZENhcmRGb3JtO1xuZXhwb3J0IGNvbnN0IGl0ZW1UZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pdGVtLXRlbXBsYXRlJykuY29udGVudDtcbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkcycpO1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY3JlYXRlLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGNhcmRJbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ZpZWxkX2lucHV0X3BsYWNlJyk7XG5leHBvcnQgY29uc3QgY2FyZElucHV0SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ZpZWxkX2lucHV0X3VybCcpO1xuZXhwb3J0IGNvbnN0IGRvY3VtZW50UGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdlJyk7IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5cbmltcG9ydCB7XG4gIGNvbmZpZyxcbiAgaW5pdGlhbENhcmRzLFxuICB1c2VySW5wdXRTZWxlY3RvcixcbiAgZWRpdEJ1dHRvbixcbiAgYWRkQnV0dG9uLFxuICBuYW1lSW5wdXQsXG4gIGpvYklucHV0XG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcblxuLy/RhNGD0L3QutGG0LjQvtC90LDQu9GM0L3QvtGB0YLRjCDQutCw0YDRgtC+0YfQtdC6XG4vL9GD0L3QuNCy0LXRgNGB0LDQu9GM0L3QsNGPINGE0YPQvdC60YbQuNGPINGB0L7Qt9C00LDQvdC40Y8g0LrQsNGA0YLQvtGH0LXQulxuY29uc3QgY3JlYXRlTmV3Q2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoZGF0YSwgXCIuaXRlbS10ZW1wbGF0ZVwiLCAobmFtZSwgbGluaykgPT4ge1xuICAgIHByZXZpZXdQb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xuICB9KTtcbiAgY29uc3QgY2FyZEVsID0gY2FyZEVsZW1lbnQuY3JlYXRlQ2FyZCgpO1xuICByZXR1cm4gY2FyZEVsO1xufVxuXG4vL9GB0L7Qt9C00LDQvdC40LUg0Lgg0L7RgtGA0LjRgdC+0LLQutCwINC00LXRhNC+0LvRgtC90YvRhSDQutCw0YDRgtC+0YfQtdC6INC40Lcg0LzQsNGB0YHQuNCy0LBcbmNvbnN0IGRlZmF1bHRDYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgZGVmYXVsdENhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlTmV3Q2FyZChpdGVtKSk7XG4gIH19LCAnLmNhcmRzJyk7XG5kZWZhdWx0Q2FyZExpc3QucmVuZGVySXRlbXMoKTtcblxuLy/RgdC+0LfQtNCw0L3QuNC1INC80L7QtNCw0LvRjNC90YvRhSDQvtC60L7QvVxuY29uc3QgcHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfcHJldmlldycpO1xucHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfZWRpdCcsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhZGRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfYWRkJywgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQpO1xuYWRkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy/QvtCx0YrQtdC60YIg0YEg0LTQsNC90L3Ri9C80Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh1c2VySW5wdXRTZWxlY3Rvcik7XG5cbi8v0L7QsdGA0LDQsdC+0YLRh9C40Log0L7RgtC/0YDQsNCy0LrQuCDRhNC+0YDQvNGLINC/0YDQvtGE0LjQu9GPXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCAoZGF0YSkge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWVWYWx1ZSwgZGF0YS5qb2JWYWx1ZSk7XG4gIGVkaXRQb3B1cC5jbG9zZSgpO1xufVxuXG4vL9C+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7Qt9C00LDQvdC40Y8g0Lgg0L7RgtGA0LjRgdC+0LLQutC4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjNGB0LrQvtC5INC60LDRgNGC0L7Rh9C60LhcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGRhdGEpIHtcbiAgYWRkUG9wdXAuY2xvc2UoKTtcbiAgZGF0YS5uYW1lID0gZGF0YS5wbGFjZVZhbHVlO1xuICBkYXRhLmxpbmsgPSBkYXRhLnVybFZhbHVlO1xuICBkZWZhdWx0Q2FyZExpc3QuYWRkVXNlckl0ZW0oY3JlYXRlTmV3Q2FyZChkYXRhKSk7XG59XG5cbi8vINC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0LrQvdC+0L/QvtC6XG4vLyDRgdC70YPRiNCw0YLQtdC70Ywg0LrQvdC+0L/QutC4INC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y9cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IGN1cnJlbnRVc2VySW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IGN1cnJlbnRVc2VySW5mby5uYW1lO1xuICBqb2JJbnB1dC52YWx1ZSA9IGN1cnJlbnRVc2VySW5mby5qb2I7XG4gIGVkaXRQb3B1cC5vcGVuKCk7XG59KTtcblxuLy/RgdC70YPRiNCw0YLQtdC70Ywg0LrQvdC+0L/QutC4INCh0L7Qt9C00LDRgtGMICjQtNC+0LHQsNCy0LvQtdC90LjQtSDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LgpXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGFkZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vLyDQstCw0LvQuNC00LDRhtC40Y8g0YTQvtGA0LxcbmNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2Zvcm0nKSk7XG5mb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZm9ybVZhbGlkYXRlLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgfSk7XG4gIGNvbnN0IGZvcm1WYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICBmb3JtVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBmb3JtVmFsaWRhdGUuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==