(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.items,o=e.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var n,r;return n=t,(r=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"addUserItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}},{key:"renderItem",value:function(){this._renderer(this._renderedItems)}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._keyEscape="Escape",this._handleEscClose=this._handleEscClose.bind(this),this._popup=document.querySelector(t),this._form=this._popup.querySelector(".popup__form")}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close-button"))&&e.close()}))}},{key:"_handleEscClose",value:function(){var e=this;document.addEventListener("keydown",(function(t){t.code===e._keyEscape&&e.close()}))}}])&&n(t.prototype,r),e}();function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,n,r,o,l=(r=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(r);if(o){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)});function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=l.call(this,e))._popupImage=document.querySelector(".popup__image"),t._popupText=document.querySelector(".popup__imagetext"),t}return t=p,(n=[{key:"open",value:function(e,t){u(a(p.prototype),"open",this).call(this),this._popupImage.src=t,this._popupText.textContent=e,this._popupImage.setAttribute("alt",e),document.querySelector(this._popupSelector).classList.add("popup_opened")}}])&&i(t.prototype,n),p}(r);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitFormCallback=t,n}return t=u,(n=[{key:"close",value:function(){_(h(u.prototype),"close",this).call(this),this._form.reset(),document.querySelector(this._popupSelector).classList.remove("popup_opened")}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._popup.querySelectorAll(".popup__field"),this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;_(h(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitFormCallback(e._getInputValues())}))}}])&&f(t.prototype,n),u}(r);function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameUserSelector=t.nameUserSelector,this._jobUserSelector=t.jobUserSelector,this._userData={},this._nameUserElement=document.querySelector(this._nameUserSelector),this._jobUserElement=document.querySelector(this._jobUserSelector)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userData.name=this._nameUserElement.textContent,this._userData.job=this._jobUserElement.textContent,this._userData}},{key:"setUserInfo",value:function(e,t){this._nameUserElement.textContent=e,this._jobUserElement.textContent=t}}])&&v(t.prototype,n),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._cardSelector=n,this._handleImageClick=r,this._element=this._getTemplate(this._cardSelector),this._image=this._element.querySelector(".card__image"),this._cardLike=this._element.querySelector(".card__like"),this._deleteButton=this._element.querySelector(".card__trash")}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"createCard",value:function(){return this._element.querySelector(".card__header").textContent=this._name,this._element.querySelector(".card__image").setAttribute("src",this._link),this._element.querySelector(".card__image").setAttribute("alt",this._name),this._setEventListeners(this._name,this._link),this._element}},{key:"_setEventListeners",value:function(e,t){var n=this;this._image.addEventListener("click",(function(){n._handleImageClick(e,t)})),this._cardLike.addEventListener("click",(function(e){e.target.classList.toggle("card__like_active")})),this._deleteButton.addEventListener("click",(function(e){e.target.closest(".card").remove()}))}}])&&S(t.prototype,n),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k(this,"_isValid",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),k(this,"_showInputError",(function(e,t){var n=r._form.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputErrorClass),n.textContent=t,n.classList.add(r._errorClass)})),k(this,"_hideInputError",(function(e){var t=r._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputErrorClass),t.classList.remove(r._errorClass),t.textContent=""})),k(this,"_setEventListeners",(function(){r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._isValid(e),r._toggleButtonState()}))}))})),k(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),k(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r.disableSubmitButton():(r._buttonElement.classList.remove(r._inactiveButtonClass),r._buttonElement.removeAttribute("disabled"))})),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(this._form)}},{key:"disableSubmitButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}}])&&E(t.prototype,n),e}(),C={formSelector:".popup__form",inputSelector:".popup__field",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__field_type_error",errorClass:"popup__error_visible"},q=document.querySelector(".popup_edit"),L=document.querySelector(".popup_add"),j=document.querySelector(".popup_preview"),O=document.querySelector(".profile__edit-button"),I=document.querySelector(".profile__add-button"),P=(q.querySelector(".popup__close-button"),L.querySelector(".popup__close-button"),j.querySelector(".popup__close-button"),document.querySelector(".profile__title"),document.querySelector(".profile__subtitle"),document.querySelector(".popup__field_input_name")),x=document.querySelector(".popup__field_input_job"),B=(document.querySelector(".popup__image"),document.querySelector(".popup__imagetext"),document.forms.editProfileForm,document.forms.addCardForm,document.querySelector(".item-template").content,document.querySelector(".cards"),document.querySelector(".popup__create-button"),document.querySelector(".popup__field_input_place"),document.querySelector(".popup__field_input_url"),document.querySelector(".page"),new y(".popup_add",(function(e){B.close(addCardForm),e.name=e.placeValue,e.link=e.urlValue,U.addUserItem(R(e))})));B.setEventListeners();var U=new t({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){var t=new g(e,".item-template",(function(e,t){T.open(e,t)})).createCard();U.addItem(t)}},".cards");U.renderItems();var R=function(e){return new g(e,".item-template",(function(e,t){T.open(e,t)})).createCard()},T=new l(".popup_preview");T.setEventListeners();var V=new b({nameUserSelector:".profile__title",jobUserSelector:".profile__subtitle"});O.addEventListener("click",(function(){var e=V.getUserInfo();P.value=e.name,x.value=e.job,A.open()})),I.addEventListener("click",(function(){B.open()})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault(),t.disableSubmitButton()}));var t=new w(C,e);t.enableValidation(),t.disableSubmitButton()}));var A=new y(".popup_edit",(function(e){V.setUserInfo(e.nameValue,e.jobValue),A.close(editProfileForm)}));A.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJ0aGlzIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmQiLCJmb3JFYWNoIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX2tleUVzY2FwZSIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfcG9wdXAiLCJfZm9ybSIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJjbG9zZSIsImNvZGUiLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltYWdlIiwiX3BvcHVwVGV4dCIsIm5hbWUiLCJsaW5rIiwic3JjIiwidGV4dENvbnRlbnQiLCJzZXRBdHRyaWJ1dGUiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybUNhbGxiYWNrIiwiX3N1Ym1pdEZvcm1DYWxsYmFjayIsInJlc2V0IiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlVzZXJJbmZvIiwidXNlcklucHV0U2VsZWN0b3IiLCJfbmFtZVVzZXJTZWxlY3RvciIsIm5hbWVVc2VyU2VsZWN0b3IiLCJfam9iVXNlclNlbGVjdG9yIiwiam9iVXNlclNlbGVjdG9yIiwiX3VzZXJEYXRhIiwiX25hbWVVc2VyRWxlbWVudCIsIl9qb2JVc2VyRWxlbWVudCIsImpvYiIsIm5hbWVWYWx1ZSIsImpvYlZhbHVlIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2ltYWdlIiwiX2NhcmRMaWtlIiwiX2RlbGV0ZUJ1dHRvbiIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0b2dnbGUiLCJjbG9zZXN0IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJpbnB1dFNlbGVjdG9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJpbnB1dEVsZW1lbnQiLCJfaXNWYWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl9idXR0b25FbGVtZW50IiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXJyYXkiLCJmcm9tIiwicG9wdXBFZGl0IiwicG9wdXBBZGQiLCJwb3B1cFByZXZpZXciLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJhZGRQb3B1cCIsImZvcm1zIiwiZWRpdFByb2ZpbGVGb3JtIiwiYWRkQ2FyZEZvcm0iLCJwbGFjZVZhbHVlIiwidXJsVmFsdWUiLCJkZWZhdWx0Q2FyZExpc3QiLCJhZGRVc2VySXRlbSIsImNyZWF0ZU5ld0NhcmQiLCJzZXRFdmVudExpc3RlbmVycyIsImNhcmRFbGVtZW50IiwicHJldmlld1BvcHVwIiwib3BlbiIsImNyZWF0ZUNhcmQiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJ1c2VySW5mbyIsImN1cnJlbnRVc2VySW5mbyIsImdldFVzZXJJbmZvIiwiZWRpdFBvcHVwIiwiZm9ybUVsZW1lbnQiLCJmb3JtVmFsaWRhdGUiLCJlbmFibGVWYWxpZGF0aW9uIiwic2V0VXNlckluZm8iXSwibWFwcGluZ3MiOiI2TEFBcUJBLEUsV0FDakIsYUFBaUNDLEdBQW1CLElBQXRDQyxFQUFzQyxFQUF0Q0EsTUFBT0MsRUFBK0IsRUFBL0JBLFUsNEZBQStCLFNBQ2hEQyxLQUFLQyxlQUFpQkgsRUFDdEJFLEtBQUtFLFVBQVlILEVBQ2pCQyxLQUFLRyxXQUFhQyxTQUFTQyxjQUFjUixHLDRDQUc3QyxTQUFRUyxHQUNKTixLQUFLRyxXQUFXSSxPQUFPRCxLLHlCQUczQixTQUFZQSxHQUNSTixLQUFLRyxXQUFXSyxRQUFRRixLLHlCQUc1QixXQUFjLFdBQ1ZOLEtBQUtDLGVBQWVRLFNBQVEsU0FB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RixFQUFhMUMseUJBRWYsSUFBTTBDLEVBQWUsSUFBSTdELEVBQWNDLEVBQVEyRCxHQUMvQ0MsRUFBYUMsbUJBQ2JELEVBQWExQyx5QkFHZixJQUFNd0MsRUFBWSxJQUFJcEcsRUFBYyxlQTlCcEMsU0FBa0N3QixHQUNoQ3lFLEVBQVNPLFlBQVloRixFQUFLSCxVQUFXRyxFQUFLRixVQUMxQzhFLEVBQVU5RyxNQUFNNkYsb0JBNkJsQmlCLEVBQVVWLHFCIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIGFkZFVzZXJJdGVtKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgcmVuZGVySXRlbXMoKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaChpdGVtID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKVxuICAgIH1cblxuICAgIHJlbmRlckl0ZW0oKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyKHRoaXMuX3JlbmRlcmVkSXRlbXMpO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fa2V5RXNjYXBlICA9ICdFc2NhcGUnO1xuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZ0LmNvZGUgPT09IHRoaXMuX2tleUVzY2FwZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuICAgICAgICB0aGlzLl9wb3B1cFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdldGV4dCcpO1xuICAgIH1cblxuICAgIG9wZW4obmFtZSwgbGluaykge1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcbiAgICAgICAgdGhpcy5fcG9wdXBUZXh0LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIG5hbWUpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcHVwU2VsZWN0b3IpLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcblxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEZvcm1DYWxsYmFjaykge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fc3VibWl0Rm9ybUNhbGxiYWNrID0gc3VibWl0Rm9ybUNhbGxiYWNrO1xuXG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFNlbGVjdG9yKS5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fZmllbGQnKTtcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+XG4gICAgICAgICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0Rm9ybUNhbGxiYWNrKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHVzZXJJbnB1dFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX25hbWVVc2VyU2VsZWN0b3IgPSB1c2VySW5wdXRTZWxlY3Rvci5uYW1lVXNlclNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9qb2JVc2VyU2VsZWN0b3IgPSB1c2VySW5wdXRTZWxlY3Rvci5qb2JVc2VyU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX3VzZXJEYXRhID0ge307XG4gICAgICAgIHRoaXMuX25hbWVVc2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbmFtZVVzZXJTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2pvYlVzZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9qb2JVc2VyU2VsZWN0b3IpXG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHRoaXMuX3VzZXJEYXRhLm5hbWUgPSB0aGlzLl9uYW1lVXNlckVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgIHRoaXMuX3VzZXJEYXRhLmpvYiA9IHRoaXMuX2pvYlVzZXJFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFcbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyhuYW1lVmFsdWUsIGpvYlZhbHVlKSB7XG4gICAgICAgIHRoaXMuX25hbWVVc2VyRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWVWYWx1ZTtcbiAgICAgICAgdGhpcy5fam9iVXNlckVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2JWYWx1ZTtcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSh0aGlzLl9jYXJkU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICAgICAgdGhpcy5fY2FyZExpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJyk7XG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RyYXNoJyk7XG4gICAgfVxuXG4gICAgX2dldFRlbXBsYXRlKCkge1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAgICAgICAuY29udGVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJylcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgICB9XG5cbiAgICBjcmVhdGVDYXJkKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19oZWFkZXInKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJykuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLl9saW5rKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIHRoaXMuX25hbWUpO1xuXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMobmFtZSwgbGluaykge1xuICAgICAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayhuYW1lLCBsaW5rKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fY2FyZExpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIGV2dC50YXJnZXQuY2xvc2VzdCgnLmNhcmQnKS5yZW1vdmUoKTtcbiAgICAgICAgfSlcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBfaXNWYWxpZCA9IChpbnB1dFNlbGVjdG9yKSA9PiB7XG4gICAgICAgIGlmICghaW5wdXRTZWxlY3Rvci52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRTZWxlY3RvciwgaW5wdXRTZWxlY3Rvci52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dFNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dFNlbGVjdG9yLCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dFNlbGVjdG9yLmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dFNlbGVjdG9yLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB9XG5cbiAgICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRTZWxlY3RvcikgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0U2VsZWN0b3IuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0U2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAvLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDQutCw0LbQtNC+0LzRgyDQv9C+0LvRjiDQvtCx0YDQsNCx0L7RgtGH0LjQutCwINGB0L7QsdGL0YLQuNGPIGlucHV0XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8g0L/RgNC+0LLQtdGA0LrQsCDQvdCwINCy0LDQu9C40LTQvdC+0YHRgtGMXG4gICAgICAgICAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIC8vINC40LfQvNC10L3QtdC90LjQtSDRgdC+0YHRgtC+0Y/QvdC40Y8g0LDQutGC0LjQstC90L7RgdGC0Lgg0LrQvdC+0L/QutC4INGE0L7RgNC80YtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9mb3JtKTtcbiAgICB9XG5cbiAgICAvLyDQpNGD0L3QutGG0LjRjyDQv9GA0LjQvdC40LzQsNC10YIg0LzQsNGB0YHQuNCyINC/0L7Qu9C10LlcbiAgICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgLy8g0JXRgdC70Lgg0L/QvtC70LUg0L3QtSDQstCw0LvQuNC00L3Qviwg0LrQvtC70LHRjdC6INCy0LXRgNC90ZHRgiB0cnVlXG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICAgICAgfSlcbiAgICB9XG5cbi8vINCk0YPQvdC60YbQuNGPINC/0YDQuNC90LjQvNCw0LXRgiDQvNCw0YHRgdC40LIg0L/QvtC70LXQuSDQstCy0L7QtNCwXG4vLyDQuCDRjdC70LXQvNC10L3RgiDQutC90L7Qv9C60LgsINGB0L7RgdGC0L7Rj9C90LjQtSDQutC+0YLQvtGA0L7QuSDQvdGD0LbQvdC+INC80LXQvdGP0YLRjFxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICB9XG59IiwiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2ZpZWxkJyxcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXG4gICAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2ZpZWxkX3R5cGVfZXJyb3InLFxuICAgIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcbn07XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiAn0JDRgNGF0YvQtycsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4gICAgfVxuICAgICxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4gICAgfVxuXTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9lZGl0Jyk7XG5leHBvcnQgY29uc3QgcG9wdXBBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfYWRkJyk7XG5leHBvcnQgY29uc3QgcG9wdXBQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3ByZXZpZXcnKTtcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBjbG9zZUJ1dHRvbkVkaXQgPSBwb3B1cEVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBjbG9zZUJ1dHRvbkFkZCA9IHBvcHVwQWRkLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgY2xvc2VCdXR0b25QcmV2aWV3ID0gcG9wdXBQcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZVN1YnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3N1YnRpdGxlJyk7XG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWVsZF9pbnB1dF9uYW1lJyk7XG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ZpZWxkX2lucHV0X2pvYicpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZXRleHQnKTtcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtcy5lZGl0UHJvZmlsZUZvcm07XG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtcy5hZGRDYXJkRm9ybTtcbmV4cG9ydCBjb25zdCBpdGVtVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaXRlbS10ZW1wbGF0ZScpLmNvbnRlbnQ7XG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHMnKTtcbmV4cG9ydCBjb25zdCBjcmVhdGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NyZWF0ZS1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBjYXJkSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWVsZF9pbnB1dF9wbGFjZScpO1xuZXhwb3J0IGNvbnN0IGNhcmRJbnB1dEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWVsZF9pbnB1dF91cmwnKTtcbmV4cG9ydCBjb25zdCBkb2N1bWVudFBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpO1xuZXhwb3J0IGNvbnN0IHVzZXJJbnB1dFNlbGVjdG9yID0ge1xuICAgIG5hbWVVc2VyU2VsZWN0b3I6ICcucHJvZmlsZV9fdGl0bGUnLFxuICAgIGpvYlVzZXJTZWxlY3RvcjogJy5wcm9maWxlX19zdWJ0aXRsZSdcbn0iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcblxuaW1wb3J0IHtcbiAgY29uZmlnLFxuICBpbml0aWFsQ2FyZHMsXG4gIHVzZXJJbnB1dFNlbGVjdG9yLFxuICBlZGl0QnV0dG9uLFxuICBhZGRCdXR0b24sXG4gIG5hbWVJbnB1dCxcbiAgam9iSW5wdXRcbn0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBhZGRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfYWRkJywgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQpO1xuYWRkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgZGVmYXVsdENhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICBpdGVtczogaW5pdGlhbENhcmRzLFxuICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoaXRlbSwgJy5pdGVtLXRlbXBsYXRlJywgKG5hbWUsIGxpbmspID0+IHtcbiAgICAgIHByZXZpZXdQb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xuICAgIH0pO1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3Q2FyZC5jcmVhdGVDYXJkKCk7XG4gICAgZGVmYXVsdENhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICB9fSwgJy5jYXJkcycpO1xuXG5kZWZhdWx0Q2FyZExpc3QucmVuZGVySXRlbXMoKTtcblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoZGF0YSkge1xuICBhZGRQb3B1cC5jbG9zZShhZGRDYXJkRm9ybSk7XG5cbiAgZGF0YS5uYW1lID0gZGF0YS5wbGFjZVZhbHVlO1xuICBkYXRhLmxpbmsgPSBkYXRhLnVybFZhbHVlO1xuICBkZWZhdWx0Q2FyZExpc3QuYWRkVXNlckl0ZW0oY3JlYXRlTmV3Q2FyZChkYXRhKSk7XG59XG5cbmNvbnN0IGNyZWF0ZU5ld0NhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKGRhdGEsIFwiLml0ZW0tdGVtcGxhdGVcIiwgKG5hbWUsIGxpbmspID0+IHtcbiAgICBwcmV2aWV3UG9wdXAub3BlbihuYW1lLCBsaW5rKTtcbiAgfSk7XG4gIGNvbnN0IGNhcmRFbCA9IGNhcmRFbGVtZW50LmNyZWF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbDtcbn1cblxuY29uc3QgcHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfcHJldmlldycpO1xucHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHVzZXJJbnB1dFNlbGVjdG9yKTtcblxuLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtGC0L/RgNCw0LLQutC4INGE0L7RgNC80Ysg0L/RgNC+0YTQuNC70Y9cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0IChkYXRhKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEubmFtZVZhbHVlLCBkYXRhLmpvYlZhbHVlKTtcbiAgZWRpdFBvcHVwLmNsb3NlKGVkaXRQcm9maWxlRm9ybSk7XG59XG5cbi8vINGB0LvRg9GI0LDRgtC10LvRjCDQutC90L7Qv9C60Lgg0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLm5hbWU7XG4gIGpvYklucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLmpvYjtcbiAgZWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vL9GB0LvRg9GI0LDRgtC10LvRjCDQutC90L7Qv9C60Lgg0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4ICjQodC+0LfQtNCw0YLRjClcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgLy8gZG9jdW1lbnQuZm9ybXMuYWRkQ2FyZEZvcm0ucmVzZXQoKTtcbiAgYWRkUG9wdXAub3BlbigpO1xufSk7XG5cbmNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2Zvcm0nKSk7XG5mb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZm9ybVZhbGlkYXRlLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgfSk7XG4gIGNvbnN0IGZvcm1WYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICBmb3JtVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBmb3JtVmFsaWRhdGUuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xufSk7XG5cbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfZWRpdCcsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpOyJdLCJzb3VyY2VSb290IjoiIn0=