(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.items,o=e.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var n,r;return n=t,(r=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"addUserItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._keyEscape="Escape",this._handleEscClose=this._handleEscClose.bind(this),this._popup=document.querySelector(this._popupSelector)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close-button"))&&e.close()}))}},{key:"_handleEscClose",value:function(e){e.code===this._keyEscape&&this.close()}}])&&n(t.prototype,r),e}();function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,o,l=(r=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(r);if(o){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=l.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupText=t._popup.querySelector(".popup__imagetext"),t}return t=p,(n=[{key:"open",value:function(e,t){u(a(p.prototype),"open",this).call(this),this._popupImage.src=t,this._popupText.textContent=e,this._popupImage.setAttribute("alt",e)}}])&&i(t.prototype,n),p}(r);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitFormCallback=t,n._form=n._popup.querySelector(".popup__form"),n._inputList=n._popup.querySelectorAll(".popup__field"),n}return t=u,(n=[{key:"close",value:function(){_(h(u.prototype),"close",this).call(this),this._form.reset()}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;_(h(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitFormCallback(e._getInputValues())}))}}])&&f(t.prototype,n),u}(r);function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameUserSelector=t.nameUserSelector,this._jobUserSelector=t.jobUserSelector,this._userData={},this._nameUserElement=document.querySelector(this._nameUserSelector),this._jobUserElement=document.querySelector(this._jobUserSelector)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userData.name=this._nameUserElement.textContent,this._userData.job=this._jobUserElement.textContent,this._userData}},{key:"setUserInfo",value:function(e,t){this._nameUserElement.textContent=e,this._jobUserElement.textContent=t}}])&&v(t.prototype,n),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._cardSelector=n,this._handleImageClick=r,this._element=this._getTemplate(this._cardSelector),this._image=this._element.querySelector(".card__image"),this._cardLike=this._element.querySelector(".card__like"),this._deleteButton=this._element.querySelector(".card__trash")}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"createCard",value:function(){return this._element.querySelector(".card__header").textContent=this._name,this._image.setAttribute("src",this._link),this._image.setAttribute("alt",this._name),this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._image.addEventListener("click",(function(){e._handleImageClick(e._name,e._link)})),this._cardLike.addEventListener("click",(function(e){e.target.classList.toggle("card__like_active")})),this._deleteButton.addEventListener("click",(function(e){e.target.closest(".card").remove()}))}}])&&S(t.prototype,n),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k(this,"_isValid",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),k(this,"_showInputError",(function(e,t){var n=r._form.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputErrorClass),n.textContent=t,n.classList.add(r._errorClass)})),k(this,"_hideInputError",(function(e){var t=r._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputErrorClass),t.classList.remove(r._errorClass),t.textContent=""})),k(this,"_setEventListeners",(function(){r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._isValid(e),r._toggleButtonState()}))}))})),k(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),k(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r.disableSubmitButton():(r._buttonElement.classList.remove(r._inactiveButtonClass),r._buttonElement.removeAttribute("disabled"))})),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(this._form)}},{key:"disableSubmitButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}}])&&E(t.prototype,n),e}(),C={formSelector:".popup__form",inputSelector:".popup__field",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__field_type_error",errorClass:"popup__error_visible"},j=document.querySelector(".popup_edit"),L=document.querySelector(".popup_add"),q=document.querySelector(".popup_preview"),O=document.querySelector(".profile__edit-button"),I=document.querySelector(".profile__add-button"),P=document.querySelector(".popup__field_input_name"),x=document.querySelector(".popup__field_input_job"),B=(j.querySelector(".popup__close-button"),L.querySelector(".popup__close-button"),q.querySelector(".popup__close-button"),document.querySelector(".profile__title"),document.querySelector(".profile__subtitle"),document.querySelector(".popup__image"),document.querySelector(".popup__imagetext"),document.forms.editProfileForm,document.forms.addCardForm,document.querySelector(".item-template").content,document.querySelector(".cards"),document.querySelector(".popup__create-button"),document.querySelector(".popup__field_input_place"),document.querySelector(".popup__field_input_url"),document.querySelector(".page"),function(e){return new g(e,".item-template",(function(e,t){R.open(e,t)})).createCard()}),U=new t({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){U.addItem(B(e))}},".cards");U.renderItems();var R=new l(".popup_preview");R.setEventListeners();var T=new y(".popup_edit",(function(e){A.setUserInfo(e.nameValue,e.jobValue),T.close()}));T.setEventListeners();var V=new y(".popup_add",(function(e){V.close(),e.name=e.placeValue,e.link=e.urlValue,U.addUserItem(B(e))}));V.setEventListeners();var A=new b({nameUserSelector:".profile__title",jobUserSelector:".profile__subtitle"});O.addEventListener("click",(function(){var e=A.getUserInfo();P.value=e.name,x.value=e.job,T.open()})),I.addEventListener("click",(function(){V.open()})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault(),t.disableSubmitButton()}));var t=new w(C,e);t.enableValidation(),t.disableSubmitButton()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJ0aGlzIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmQiLCJmb3JFYWNoIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX2tleUVzY2FwZSIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfcG9wdXAiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiY2xvc2UiLCJjb2RlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRleHQiLCJuYW1lIiwibGluayIsInNyYyIsInRleHRDb250ZW50Iiwic2V0QXR0cmlidXRlIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEZvcm1DYWxsYmFjayIsIl9zdWJtaXRGb3JtQ2FsbGJhY2siLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVzZXQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlVzZXJJbmZvIiwidXNlcklucHV0U2VsZWN0b3IiLCJfbmFtZVVzZXJTZWxlY3RvciIsIm5hbWVVc2VyU2VsZWN0b3IiLCJfam9iVXNlclNlbGVjdG9yIiwiam9iVXNlclNlbGVjdG9yIiwiX3VzZXJEYXRhIiwiX25hbWVVc2VyRWxlbWVudCIsIl9qb2JVc2VyRWxlbWVudCIsImpvYiIsIm5hbWVWYWx1ZSIsImpvYlZhbHVlIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2ltYWdlIiwiX2NhcmRMaWtlIiwiX2RlbGV0ZUJ1dHRvbiIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0b2dnbGUiLCJjbG9zZXN0IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJpbnB1dFNlbGVjdG9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJpbnB1dEVsZW1lbnQiLCJfaXNWYWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl9idXR0b25FbGVtZW50IiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXJyYXkiLCJmcm9tIiwicG9wdXBFZGl0IiwicG9wdXBBZGQiLCJwb3B1cFByZXZpZXciLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJjcmVhdGVOZXdDYXJkIiwiZm9ybXMiLCJlZGl0UHJvZmlsZUZvcm0iLCJhZGRDYXJkRm9ybSIsInByZXZpZXdQb3B1cCIsIm9wZW4iLCJjcmVhdGVDYXJkIiwiZGVmYXVsdENhcmRMaXN0IiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlZGl0UG9wdXAiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiYWRkUG9wdXAiLCJwbGFjZVZhbHVlIiwidXJsVmFsdWUiLCJhZGRVc2VySXRlbSIsImN1cnJlbnRVc2VySW5mbyIsImdldFVzZXJJbmZvIiwiZm9ybUVsZW1lbnQiLCJmb3JtVmFsaWRhdGUiLCJlbmFibGVWYWxpZGF0aW9uIl0sIm1hcHBpbmdzIjoiNkxBQXFCQSxFLFdBQ2pCLGFBQWlDQyxHQUFtQixJQUF0Q0MsRUFBc0MsRUFBdENBLE1BQU9DLEVBQStCLEVBQS9CQSxVLDRGQUErQixTQUNoREMsS0FBS0MsZUFBaUJILEVBQ3RCRSxLQUFLRSxVQUFZSCxFQUNqQkMsS0FBS0csV0FBYUMsU0FBU0MsY0FBY1IsRyw0Q0FHN0MsU0FBUVMsR0FDSk4sS0FBS0csV0FBV0ksT0FBT0QsSyx5QkFHM0IsU0FBWUEsR0FDUk4sS0FBS0csV0FBV0ssUUFBUUYsSyx5QkFHNUIsV0FBYyxXQUNWTixLQUFLQyxlQUFlUSxTQUFRLFNBQUFDLEdBQUksT0FBSSxF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LGtGQ0ZaakMsU0FBVSxTQUFDVyxHQUNUbUgsRUFBZ0JDLFFBQVFSLEVBQWM1RyxNQUNwQyxVQUNObUgsRUFBZ0JFLGNBR2hCLElBQU1MLEVBQWUsSUFBSTlGLEVBQWUsa0JBQ3hDOEYsRUFBYU0sb0JBRWIsSUFBTUMsRUFBWSxJQUFJN0YsRUFBYyxlQVVwQyxTQUFrQ3lCLEdBQ2hDcUUsRUFBU0MsWUFBWXRFLEVBQUtILFVBQVdHLEVBQUtGLFVBQzFDc0UsRUFBVXZHLFdBWFp1RyxFQUFVRCxvQkFFVixJQUFNSSxFQUFXLElBQUloRyxFQUFjLGNBYW5DLFNBQWlDeUIsR0FDL0J1RSxFQUFTMUcsUUFDVG1DLEVBQUs5QixLQUFPOEIsRUFBS3dFLFdBQ2pCeEUsRUFBSzdCLEtBQU82QixFQUFLeUUsU0FDakJULEVBQWdCVSxZQUFZakIsRUFBY3pELE9BaEI1Q3VFLEVBQVNKLG9CQUdULElBQU1FLEVBQVcsSUFBSWxGLEVESFksQ0FDN0JHLGlCQUFrQixrQkFDbEJFLGdCQUFpQix1QkNtQnJCNkQsRUFBVzlGLGlCQUFpQixTQUFTLFdBQ25DLElBQU1vSCxFQUFrQk4sRUFBU08sY0FDakNyQixRQUFrQm9CLEVBQWdCekcsS0FDbENzRixRQUFpQm1CLEVBQWdCL0UsSUFDakN3RSxFQUFVTixVQUlaUixFQUFVL0YsaUJBQWlCLFNBQVMsV0FDbENnSCxFQUFTVCxVQUlNZCxNQUFNQyxLQUFLMUcsU0FBU3FDLGlCQUFpQixpQkFDN0NoQyxTQUFRLFNBQUNpSSxHQUNoQkEsRUFBWXRILGlCQUFpQixVQUFVLFNBQVVHLEdBQy9DQSxFQUFJdUIsaUJBQ0o2RixFQUFhMUMseUJBRWYsSUFBTTBDLEVBQWUsSUFBSTdELEVBQWNDLEVBQVEyRCxHQUMvQ0MsRUFBYUMsbUJBQ2JELEVBQWExQywwQiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgICB9XG5cbiAgICBhZGRVc2VySXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKCkge1xuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSlcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2tleUVzY2FwZSAgPSAnRXNjYXBlJztcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXBTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgICAgICAgICBpZiAoZXZ0LmNvZGUgPT09IHRoaXMuX2tleUVzY2FwZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbiAgICAgICAgdGhpcy5fcG9wdXBUZXh0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZXRleHQnKTtcbiAgICB9XG5cbiAgICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgICAgIHRoaXMuX3BvcHVwVGV4dC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCBuYW1lKTtcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEZvcm1DYWxsYmFjaykge1xuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fc3VibWl0Rm9ybUNhbGxiYWNrID0gc3VibWl0Rm9ybUNhbGxiYWNrO1xuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19maWVsZCcpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT5cbiAgICAgICAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRGb3JtQ2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IodXNlcklucHV0U2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fbmFtZVVzZXJTZWxlY3RvciA9IHVzZXJJbnB1dFNlbGVjdG9yLm5hbWVVc2VyU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2pvYlVzZXJTZWxlY3RvciA9IHVzZXJJbnB1dFNlbGVjdG9yLmpvYlVzZXJTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fdXNlckRhdGEgPSB7fTtcbiAgICAgICAgdGhpcy5fbmFtZVVzZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9uYW1lVXNlclNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fam9iVXNlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2pvYlVzZXJTZWxlY3RvcilcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgdGhpcy5fdXNlckRhdGEubmFtZSA9IHRoaXMuX25hbWVVc2VyRWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgdGhpcy5fdXNlckRhdGEuam9iID0gdGhpcy5fam9iVXNlckVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVxuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKG5hbWVWYWx1ZSwgam9iVmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbmFtZVVzZXJFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZVZhbHVlO1xuICAgICAgICB0aGlzLl9qb2JVc2VyRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYlZhbHVlO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKHRoaXMuX2NhcmRTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgICAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKTtcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdHJhc2gnKTtcbiAgICB9XG5cbiAgICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgICAgICAgIC5jb250ZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmNhcmQnKVxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICAgIH1cblxuICAgIGNyZWF0ZUNhcmQoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2hlYWRlcicpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLl9saW5rKTtcbiAgICAgICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCB0aGlzLl9uYW1lKTtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fY2FyZExpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2VfYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIGV2dC50YXJnZXQuY2xvc2VzdCgnLmNhcmQnKS5yZW1vdmUoKTtcbiAgICAgICAgfSlcbiAgICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBfaXNWYWxpZCA9IChpbnB1dFNlbGVjdG9yKSA9PiB7XG4gICAgICAgIGlmICghaW5wdXRTZWxlY3Rvci52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRTZWxlY3RvciwgaW5wdXRTZWxlY3Rvci52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dFNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dFNlbGVjdG9yLCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dFNlbGVjdG9yLmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dFNlbGVjdG9yLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB9XG5cbiAgICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRTZWxlY3RvcikgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0U2VsZWN0b3IuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0U2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAvLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDQutCw0LbQtNC+0LzRgyDQv9C+0LvRjiDQvtCx0YDQsNCx0L7RgtGH0LjQutCwINGB0L7QsdGL0YLQuNGPIGlucHV0XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8g0L/RgNC+0LLQtdGA0LrQsCDQvdCwINCy0LDQu9C40LTQvdC+0YHRgtGMXG4gICAgICAgICAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIC8vINC40LfQvNC10L3QtdC90LjQtSDRgdC+0YHRgtC+0Y/QvdC40Y8g0LDQutGC0LjQstC90L7RgdGC0Lgg0LrQvdC+0L/QutC4INGE0L7RgNC80YtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9mb3JtKTtcbiAgICB9XG5cbiAgICAvLyDQpNGD0L3QutGG0LjRjyDQv9GA0LjQvdC40LzQsNC10YIg0LzQsNGB0YHQuNCyINC/0L7Qu9C10LlcbiAgICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgLy8g0JXRgdC70Lgg0L/QvtC70LUg0L3QtSDQstCw0LvQuNC00L3Qviwg0LrQvtC70LHRjdC6INCy0LXRgNC90ZHRgiB0cnVlXG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICAgICAgfSlcbiAgICB9XG5cbi8vINCk0YPQvdC60YbQuNGPINC/0YDQuNC90LjQvNCw0LXRgiDQvNCw0YHRgdC40LIg0L/QvtC70LXQuSDQstCy0L7QtNCwXG4vLyDQuCDRjdC70LXQvNC10L3RgiDQutC90L7Qv9C60LgsINGB0L7RgdGC0L7Rj9C90LjQtSDQutC+0YLQvtGA0L7QuSDQvdGD0LbQvdC+INC80LXQvdGP0YLRjFxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICB9XG59IiwiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2ZpZWxkJyxcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXG4gICAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2ZpZWxkX3R5cGVfZXJyb3InLFxuICAgIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcbn07XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiAn0JDRgNGF0YvQtycsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4gICAgfVxuICAgICxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4gICAgfVxuXTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9lZGl0Jyk7XG5leHBvcnQgY29uc3QgcG9wdXBBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfYWRkJyk7XG5leHBvcnQgY29uc3QgcG9wdXBQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3ByZXZpZXcnKTtcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ZpZWxkX2lucHV0X25hbWUnKTtcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZmllbGRfaW5wdXRfam9iJyk7XG5leHBvcnQgY29uc3QgdXNlcklucHV0U2VsZWN0b3IgPSB7XG4gICAgbmFtZVVzZXJTZWxlY3RvcjogJy5wcm9maWxlX190aXRsZScsXG4gICAgam9iVXNlclNlbGVjdG9yOiAnLnByb2ZpbGVfX3N1YnRpdGxlJ1xufTtcblxuLy8g0LLRgNC10LzQtdC90L3QviDQvdC10LjRgdC/0L7Qu9GM0LfRg9C10LzRi9C1INC/0LXRgNC10LzQtdC90L3Ri9C1XG5leHBvcnQgY29uc3QgY2xvc2VCdXR0b25FZGl0ID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgY2xvc2VCdXR0b25BZGQgPSBwb3B1cEFkZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGNsb3NlQnV0dG9uUHJldmlldyA9IHBvcHVwUHJldmlldy5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX190aXRsZScpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVTdWJ0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19zdWJ0aXRsZScpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZXRleHQnKTtcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtcy5lZGl0UHJvZmlsZUZvcm07XG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtcy5hZGRDYXJkRm9ybTtcbmV4cG9ydCBjb25zdCBpdGVtVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaXRlbS10ZW1wbGF0ZScpLmNvbnRlbnQ7XG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHMnKTtcbmV4cG9ydCBjb25zdCBjcmVhdGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NyZWF0ZS1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBjYXJkSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWVsZF9pbnB1dF9wbGFjZScpO1xuZXhwb3J0IGNvbnN0IGNhcmRJbnB1dEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWVsZF9pbnB1dF91cmwnKTtcbmV4cG9ydCBjb25zdCBkb2N1bWVudFBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpOyIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuXG5pbXBvcnQge1xuICBjb25maWcsXG4gIGluaXRpYWxDYXJkcyxcbiAgdXNlcklucHV0U2VsZWN0b3IsXG4gIGVkaXRCdXR0b24sXG4gIGFkZEJ1dHRvbixcbiAgbmFtZUlucHV0LFxuICBqb2JJbnB1dFxufSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XG5cbi8v0YTRg9C90LrRhtC40L7QvdCw0LvRjNC90L7RgdGC0Ywg0LrQsNGA0YLQvtGH0LXQulxuLy/Rg9C90LjQstC10YDRgdCw0LvRjNC90LDRjyDRhNGD0L3QutGG0LjRjyDRgdC+0LfQtNCw0L3QuNGPINC60LDRgNGC0L7Rh9C10LpcbmNvbnN0IGNyZWF0ZU5ld0NhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKGRhdGEsIFwiLml0ZW0tdGVtcGxhdGVcIiwgKG5hbWUsIGxpbmspID0+IHtcbiAgICBwcmV2aWV3UG9wdXAub3BlbihuYW1lLCBsaW5rKTtcbiAgfSk7XG4gIGNvbnN0IGNhcmRFbCA9IGNhcmRFbGVtZW50LmNyZWF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbDtcbn1cblxuLy/RgdC+0LfQtNCw0L3QuNC1INC4INC+0YLRgNC40YHQvtCy0LrQsCDQtNC10YTQvtC70YLQvdGL0YUg0LrQsNGA0YLQvtGH0LXQuiDQuNC3INC80LDRgdGB0LjQstCwXG5jb25zdCBkZWZhdWx0Q2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XG4gIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgIGRlZmF1bHRDYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZU5ld0NhcmQoaXRlbSkpO1xuICB9fSwgJy5jYXJkcycpO1xuZGVmYXVsdENhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG5cbi8v0YHQvtC30LTQsNC90LjQtSDQvNC+0LTQsNC70YzQvdGL0YUg0L7QutC+0L1cbmNvbnN0IHByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3ByZXZpZXcnKTtcbnByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2VkaXQnLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5lZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgYWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2FkZCcsIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KTtcbmFkZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8v0L7QsdGK0LXQutGCINGBINC00LDQvdC90YvQvNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8odXNlcklucHV0U2VsZWN0b3IpO1xuXG4vL9C+0LHRgNCw0LHQvtGC0YfQuNC6INC+0YLQv9GA0LDQstC60Lgg0YTQvtGA0LzRiyDQv9GA0L7RhNC40LvRj1xuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQgKGRhdGEpIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS5uYW1lVmFsdWUsIGRhdGEuam9iVmFsdWUpO1xuICBlZGl0UG9wdXAuY2xvc2UoKTtcbn1cblxuLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LfQtNCw0L3QuNGPINC4INC+0YLRgNC40YHQvtCy0LrQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70YzRgdC60L7QuSDQutCw0YDRgtC+0YfQutC4XG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChkYXRhKSB7XG4gIGFkZFBvcHVwLmNsb3NlKCk7XG4gIGRhdGEubmFtZSA9IGRhdGEucGxhY2VWYWx1ZTtcbiAgZGF0YS5saW5rID0gZGF0YS51cmxWYWx1ZTtcbiAgZGVmYXVsdENhcmRMaXN0LmFkZFVzZXJJdGVtKGNyZWF0ZU5ld0NhcmQoZGF0YSkpO1xufVxuXG4vLyDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INC60L3QvtC/0L7QulxuLy8g0YHQu9GD0YjQsNGC0LXQu9GMINC60L3QvtC/0LrQuCDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCBjdXJyZW50VXNlckluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8ubmFtZTtcbiAgam9iSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8uam9iO1xuICBlZGl0UG9wdXAub3BlbigpO1xufSk7XG5cbi8v0YHQu9GD0YjQsNGC0LXQu9GMINC60L3QvtC/0LrQuCDQodC+0LfQtNCw0YLRjCAo0LTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4KVxuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBhZGRQb3B1cC5vcGVuKCk7XG59KTtcblxuLy8g0LLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8XG5jb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19mb3JtJykpO1xuZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGZvcm1WYWxpZGF0ZS5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gIH0pO1xuICBjb25zdCBmb3JtVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcbiAgZm9ybVZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgZm9ybVZhbGlkYXRlLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbn0pOyJdLCJzb3VyY2VSb290IjoiIn0=