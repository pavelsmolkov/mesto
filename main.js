(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.items,o=e.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var n,r;return n=t,(r=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"addUserItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._keyEscape="Escape",this._handleEscClose=this._handleEscClose.bind(this),this._popup=document.querySelector(t)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close-button"))&&e.close()}))}},{key:"_handleEscClose",value:function(e){e.code===this._keyEscape&&this.close()}}])&&n(t.prototype,r),e}();function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,r,o,l=(r=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(r);if(o){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=l.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupText=t._popup.querySelector(".popup__imagetext"),t}return t=p,(n=[{key:"open",value:function(e,t){u(a(p.prototype),"open",this).call(this),this._popupImage.src=t,this._popupText.textContent=e,this._popupImage.setAttribute("alt",e)}}])&&i(t.prototype,n),p}(r);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitFormCallback=t,n._form=n._popup.querySelector(".popup__form"),n}return t=u,(n=[{key:"close",value:function(){_(h(u.prototype),"close",this).call(this),this._form.reset()}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._popup.querySelectorAll(".popup__field"),this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;_(h(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitFormCallback(e._getInputValues())}))}}])&&f(t.prototype,n),u}(r);function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameUserSelector=t.nameUserSelector,this._jobUserSelector=t.jobUserSelector,this._userData={},this._nameUserElement=document.querySelector(this._nameUserSelector),this._jobUserElement=document.querySelector(this._jobUserSelector)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userData.name=this._nameUserElement.textContent,this._userData.job=this._jobUserElement.textContent,this._userData}},{key:"setUserInfo",value:function(e,t){this._nameUserElement.textContent=e,this._jobUserElement.textContent=t}}])&&v(t.prototype,n),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._cardSelector=n,this._handleImageClick=r,this._element=this._getTemplate(this._cardSelector),this._image=this._element.querySelector(".card__image"),this._cardLike=this._element.querySelector(".card__like"),this._deleteButton=this._element.querySelector(".card__trash")}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"createCard",value:function(){return this._element.querySelector(".card__header").textContent=this._name,this._image.setAttribute("src",this._link),this._image.setAttribute("alt",this._name),this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._image.addEventListener("click",(function(){e._handleImageClick(e._name,e._link)})),this._cardLike.addEventListener("click",(function(e){e.target.classList.toggle("card__like_active")})),this._deleteButton.addEventListener("click",(function(e){e.target.closest(".card").remove()}))}}])&&S(t.prototype,n),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k(this,"_isValid",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),k(this,"_showInputError",(function(e,t){var n=r._form.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputErrorClass),n.textContent=t,n.classList.add(r._errorClass)})),k(this,"_hideInputError",(function(e){var t=r._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputErrorClass),t.classList.remove(r._errorClass),t.textContent=""})),k(this,"_setEventListeners",(function(){r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._isValid(e),r._toggleButtonState()}))}))})),k(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),k(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r.disableSubmitButton():(r._buttonElement.classList.remove(r._inactiveButtonClass),r._buttonElement.removeAttribute("disabled"))})),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(this._form)}},{key:"disableSubmitButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}}])&&E(t.prototype,n),e}(),C={formSelector:".popup__form",inputSelector:".popup__field",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__field_type_error",errorClass:"popup__error_visible"},j=document.querySelector(".popup_edit"),L=document.querySelector(".popup_add"),q=document.querySelector(".popup_preview"),O=document.querySelector(".profile__edit-button"),I=document.querySelector(".profile__add-button"),P=(j.querySelector(".popup__close-button"),L.querySelector(".popup__close-button"),q.querySelector(".popup__close-button"),document.querySelector(".profile__title"),document.querySelector(".profile__subtitle"),document.querySelector(".popup__field_input_name")),x=document.querySelector(".popup__field_input_job"),B=(document.querySelector(".popup__image"),document.querySelector(".popup__imagetext"),document.forms.editProfileForm,document.forms.addCardForm,document.querySelector(".item-template").content,document.querySelector(".cards"),document.querySelector(".popup__create-button"),document.querySelector(".popup__field_input_place"),document.querySelector(".popup__field_input_url"),document.querySelector(".page"),new y(".popup_add",(function(e){B.close(),e.name=e.placeValue,e.link=e.urlValue,R.addUserItem(U(e))})));B.setEventListeners();var U=function(e){return new g(e,".item-template",(function(e,t){T.open(e,t)})).createCard()},R=new t({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){R.addItem(U(e))}},".cards");R.renderItems();var T=new l(".popup_preview");T.setEventListeners();var V=new b({nameUserSelector:".profile__title",jobUserSelector:".profile__subtitle"});O.addEventListener("click",(function(){var e=V.getUserInfo();P.value=e.name,x.value=e.job,A.open()})),I.addEventListener("click",(function(){B.open()})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault(),t.disableSubmitButton()}));var t=new w(C,e);t.enableValidation(),t.disableSubmitButton()}));var A=new y(".popup_edit",(function(e){V.setUserInfo(e.nameValue,e.jobValue),A.close()}));A.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJ0aGlzIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmQiLCJmb3JFYWNoIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX2tleUVzY2FwZSIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfcG9wdXAiLCJjbGFzc0xpc3QiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiY2xvc2UiLCJjb2RlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRleHQiLCJuYW1lIiwibGluayIsInNyYyIsInRleHRDb250ZW50Iiwic2V0QXR0cmlidXRlIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEZvcm1DYWxsYmFjayIsIl9zdWJtaXRGb3JtQ2FsbGJhY2siLCJfZm9ybSIsInJlc2V0IiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlVzZXJJbmZvIiwidXNlcklucHV0U2VsZWN0b3IiLCJfbmFtZVVzZXJTZWxlY3RvciIsIm5hbWVVc2VyU2VsZWN0b3IiLCJfam9iVXNlclNlbGVjdG9yIiwiam9iVXNlclNlbGVjdG9yIiwiX3VzZXJEYXRhIiwiX25hbWVVc2VyRWxlbWVudCIsIl9qb2JVc2VyRWxlbWVudCIsImpvYiIsIm5hbWVWYWx1ZSIsImpvYlZhbHVlIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2ltYWdlIiwiX2NhcmRMaWtlIiwiX2RlbGV0ZUJ1dHRvbiIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0b2dnbGUiLCJjbG9zZXN0IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJpbnB1dFNlbGVjdG9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJpbnB1dEVsZW1lbnQiLCJfaXNWYWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl9idXR0b25FbGVtZW50IiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXJyYXkiLCJmcm9tIiwicG9wdXBFZGl0IiwicG9wdXBBZGQiLCJwb3B1cFByZXZpZXciLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJhZGRQb3B1cCIsImZvcm1zIiwiZWRpdFByb2ZpbGVGb3JtIiwiYWRkQ2FyZEZvcm0iLCJwbGFjZVZhbHVlIiwidXJsVmFsdWUiLCJkZWZhdWx0Q2FyZExpc3QiLCJhZGRVc2VySXRlbSIsImNyZWF0ZU5ld0NhcmQiLCJzZXRFdmVudExpc3RlbmVycyIsInByZXZpZXdQb3B1cCIsIm9wZW4iLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwidXNlckluZm8iLCJjdXJyZW50VXNlckluZm8iLCJnZXRVc2VySW5mbyIsImVkaXRQb3B1cCIsImZvcm1FbGVtZW50IiwiZm9ybVZhbGlkYXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInNldFVzZXJJbmZvIl0sIm1hcHBpbmdzIjoiNkxBQXFCQSxFLFdBQ2pCLGFBQWlDQyxHQUFtQixJQUF0Q0MsRUFBc0MsRUFBdENBLE1BQU9DLEVBQStCLEVBQS9CQSxVLDRGQUErQixTQUNoREMsS0FBS0MsZUFBaUJILEVBQ3RCRSxLQUFLRSxVQUFZSCxFQUNqQkMsS0FBS0csV0FBYUMsU0FBU0MsY0FBY1IsRyw0Q0FHN0MsU0FBUVMsR0FDSk4sS0FBS0csV0FBV0ksT0FBT0QsSyx5QkFHM0IsU0FBWUEsR0FDUk4sS0FBS0csV0FBV0ssUUFBUUYsSyx5QkFHNUIsV0FBYyxXQUNWTixLQUFLQyxlQUFlUSxTQUFRLFNBQUFDLEdBQUksT0FBSSxF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QUFNLFFBQ05DLEtBQU0saUZBRVYsQ0FDSUQsS0FBTSxzQkFDTkMsS0FBTSw2RkFFVixDQUNJRCxLQUFNLFVBQ05DLEtBQU0sa0ZBRVYsQ0FDSUQsS0FBTSxXQUNOQyxLQUFNLG9GQUVWLENBQ0lELEtBQU0scUJBQ05DLEtBQU0sNkZBR1YsQ0FDSUQsS0FBTSxTQUNOQyxLQUFNLGtGQ0ZaakMsU0FBVSxTQUFDVyxHQUNUa0gsRUFBZ0JPLFFBQVFMLEVBQWNwSCxNQUNwQyxVQUVOa0gsRUFBZ0JRLGNBVWhCLElBQU1KLEVBQWUsSUFBSXBHLEVBQWUsa0JBQ3hDb0csRUFBYUQsb0JBRWIsSUFBTU0sRUFBVyxJQUFJckYsRURXWSxDQUM3QkcsaUJBQWtCLGtCQUNsQkUsZ0JBQWlCLHVCQ0pyQjZELEVBQVc5RixpQkFBaUIsU0FBUyxXQUNuQyxJQUFNa0gsRUFBa0JELEVBQVNFLGNBQ2pDbkIsUUFBa0JrQixFQUFnQnZHLEtBQ2xDc0YsUUFBaUJpQixFQUFnQjdFLElBQ2pDK0UsRUFBVVAsVUFJWmQsRUFBVS9GLGlCQUFpQixTQUFTLFdBRWxDa0csRUFBU1csVUFHTXBCLE1BQU1DLEtBQUsxRyxTQUFTc0MsaUJBQWlCLGlCQUM3Q2pDLFNBQVEsU0FBQ2dJLEdBQ2hCQSxFQUFZckgsaUJBQWlCLFVBQVUsU0FBVUcsR0FDL0NBLEVBQUl1QixpQkFDSjRGLEVBQWF6Qyx5QkFFZixJQUFNeUMsRUFBZSxJQUFJNUQsRUFBY0MsRUFBUTBELEdBQy9DQyxFQUFhQyxtQkFDYkQsRUFBYXpDLHlCQUdmLElBQU11QyxFQUFZLElBQUlwRyxFQUFjLGVBOUJwQyxTQUFrQ3lCLEdBQ2hDd0UsRUFBU08sWUFBWS9FLEVBQUtILFVBQVdHLEVBQUtGLFVBQzFDNkUsRUFBVTlHLFdBNkJaOEcsRUFBVVQscUIiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgYWRkVXNlckl0ZW0oZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpXG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9rZXlFc2NhcGUgID0gJ0VzY2FwZSc7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idXR0b24nKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgICAgICAgICAgaWYgKGV2dC5jb2RlID09PSB0aGlzLl9rZXlFc2NhcGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcblxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG4gICAgICAgIHRoaXMuX3BvcHVwVGV4dCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2V0ZXh0Jyk7XG4gICAgfVxuXG4gICAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xuICAgICAgICB0aGlzLl9wb3B1cFRleHQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgbmFtZSk7XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0Rm9ybUNhbGxiYWNrKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9zdWJtaXRGb3JtQ2FsbGJhY2sgPSBzdWJtaXRGb3JtQ2FsbGJhY2s7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2ZpZWxkJyk7XG4gICAgICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PlxuICAgICAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEZvcm1DYWxsYmFjayh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih1c2VySW5wdXRTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9uYW1lVXNlclNlbGVjdG9yID0gdXNlcklucHV0U2VsZWN0b3IubmFtZVVzZXJTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fam9iVXNlclNlbGVjdG9yID0gdXNlcklucHV0U2VsZWN0b3Iuam9iVXNlclNlbGVjdG9yO1xuICAgICAgICB0aGlzLl91c2VyRGF0YSA9IHt9O1xuICAgICAgICB0aGlzLl9uYW1lVXNlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX25hbWVVc2VyU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9qb2JVc2VyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fam9iVXNlclNlbGVjdG9yKVxuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICB0aGlzLl91c2VyRGF0YS5uYW1lID0gdGhpcy5fbmFtZVVzZXJFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICB0aGlzLl91c2VyRGF0YS5qb2IgPSB0aGlzLl9qb2JVc2VyRWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhXG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8obmFtZVZhbHVlLCBqb2JWYWx1ZSkge1xuICAgICAgICB0aGlzLl9uYW1lVXNlckVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lVmFsdWU7XG4gICAgICAgIHRoaXMuX2pvYlVzZXJFbGVtZW50LnRleHRDb250ZW50ID0gam9iVmFsdWU7XG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICAgIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUodGhpcy5fY2FyZFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgICAgIHRoaXMuX2NhcmRMaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZScpO1xuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaCcpO1xuICAgIH1cblxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgICAgICAgLmNvbnRlbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgY3JlYXRlQ2FyZCgpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faGVhZGVyJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgICAgICB0aGlzLl9pbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHRoaXMuX2xpbmspO1xuICAgICAgICB0aGlzLl9pbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIHRoaXMuX25hbWUpO1xuXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICAgIH1cblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICBldnQudGFyZ2V0LmNsb3Nlc3QoJy5jYXJkJykucmVtb3ZlKCk7XG4gICAgICAgIH0pXG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybSkge1xuICAgICAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBjb25maWcuZm9ybVNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICAgICAgdGhpcy5fZm9ybSA9IGZvcm07XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgX2lzVmFsaWQgPSAoaW5wdXRTZWxlY3RvcikgPT4ge1xuICAgICAgICBpZiAoIWlucHV0U2VsZWN0b3IudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0U2VsZWN0b3IsIGlucHV0U2VsZWN0b3IudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRTZWxlY3Rvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRTZWxlY3RvciwgZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRTZWxlY3Rvci5pZH0tZXJyb3JgKTtcbiAgICAgICAgaW5wdXRTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgfVxuXG4gICAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0U2VsZWN0b3IpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dFNlbGVjdG9yLmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dFNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIH1cblxuICAgIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgLy8g0LTQvtCx0LDQstC70LXQvdC40LUg0LrQsNC20LTQvtC80YMg0L/QvtC70Y4g0L7QsdGA0LDQsdC+0YLRh9C40LrQsCDRgdC+0LHRi9GC0LjRjyBpbnB1dFxuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vINC/0YDQvtCy0LXRgNC60LAg0L3QsCDQstCw0LvQuNC00L3QvtGB0YLRjFxuICAgICAgICAgICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAvLyDQuNC30LzQtdC90LXQvdC40LUg0YHQvtGB0YLQvtGP0L3QuNGPINCw0LrRgtC40LLQvdC+0YHRgtC4INC60L3QvtC/0LrQuCDRhNC+0YDQvNGLXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnModGhpcy5fZm9ybSk7XG4gICAgfVxuXG4gICAgLy8g0KTRg9C90LrRhtC40Y8g0L/RgNC40L3QuNC80LDQtdGCINC80LDRgdGB0LjQsiDQv9C+0LvQtdC5XG4gICAgX2hhc0ludmFsaWRJbnB1dCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIC8vINCV0YHQu9C4INC/0L7Qu9C1INC90LUg0LLQsNC70LjQtNC90L4sINC60L7Qu9Cx0Y3QuiDQstC10YDQvdGR0YIgdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgICAgIH0pXG4gICAgfVxuXG4vLyDQpNGD0L3QutGG0LjRjyDQv9GA0LjQvdC40LzQsNC10YIg0LzQsNGB0YHQuNCyINC/0L7Qu9C10Lkg0LLQstC+0LTQsFxuLy8g0Lgg0Y3Qu9C10LzQtdC90YIg0LrQvdC+0L/QutC4LCDRgdC+0YHRgtC+0Y/QvdC40LUg0LrQvtGC0L7RgNC+0Lkg0L3Rg9C20L3QviDQvNC10L3Rj9GC0YxcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfVxufSIsImV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gICAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcbiAgICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19maWVsZCcsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbicsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b25fZGlzYWJsZWQnLFxuICAgIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19maWVsZF90eXBlX2Vycm9yJyxcbiAgICBlcnJvckNsYXNzOiAncG9wdXBfX2Vycm9yX3Zpc2libGUnXG59O1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICAgIHtcbiAgICAgICAgbmFtZTogJ9CQ0YDRhdGL0LcnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2Fya2h5ei5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9jaGVseWFiaW5zay1vYmxhc3QuanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0JrQsNC80YfQsNGC0LrQsCcsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2FtY2hhdGthLmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9raG9sbW9nb3Jza3ktcmF5b24uanBnJ1xuICAgIH1cbiAgICAsXG4gICAge1xuICAgICAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xuICAgIH1cbl07XG5cbmV4cG9ydCBjb25zdCBwb3B1cEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZWRpdCcpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2FkZCcpO1xuZXhwb3J0IGNvbnN0IHBvcHVwUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9wcmV2aWV3Jyk7XG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgY2xvc2VCdXR0b25FZGl0ID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgY2xvc2VCdXR0b25BZGQgPSBwb3B1cEFkZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGNsb3NlQnV0dG9uUHJldmlldyA9IHBvcHVwUHJldmlldy5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX190aXRsZScpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVTdWJ0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19zdWJ0aXRsZScpO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZmllbGRfaW5wdXRfbmFtZScpO1xuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWVsZF9pbnB1dF9qb2InKTtcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuZXhwb3J0IGNvbnN0IHBvcHVwVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2V0ZXh0Jyk7XG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXMuZWRpdFByb2ZpbGVGb3JtO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXMuYWRkQ2FyZEZvcm07XG5leHBvcnQgY29uc3QgaXRlbVRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLml0ZW0tdGVtcGxhdGUnKS5jb250ZW50O1xuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzJyk7XG5leHBvcnQgY29uc3QgY3JlYXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jcmVhdGUtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgY2FyZElucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZmllbGRfaW5wdXRfcGxhY2UnKTtcbmV4cG9ydCBjb25zdCBjYXJkSW5wdXRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZmllbGRfaW5wdXRfdXJsJyk7XG5leHBvcnQgY29uc3QgZG9jdW1lbnRQYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UnKTtcbmV4cG9ydCBjb25zdCB1c2VySW5wdXRTZWxlY3RvciA9IHtcbiAgICBuYW1lVXNlclNlbGVjdG9yOiAnLnByb2ZpbGVfX3RpdGxlJyxcbiAgICBqb2JVc2VyU2VsZWN0b3I6ICcucHJvZmlsZV9fc3VidGl0bGUnXG59IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5cbmltcG9ydCB7XG4gIGNvbmZpZyxcbiAgaW5pdGlhbENhcmRzLFxuICB1c2VySW5wdXRTZWxlY3RvcixcbiAgZWRpdEJ1dHRvbixcbiAgYWRkQnV0dG9uLFxuICBuYW1lSW5wdXQsXG4gIGpvYklucHV0XG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcblxuY29uc3QgYWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2FkZCcsIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KTtcbmFkZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNyZWF0ZU5ld0NhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKGRhdGEsIFwiLml0ZW0tdGVtcGxhdGVcIiwgKG5hbWUsIGxpbmspID0+IHtcbiAgICBwcmV2aWV3UG9wdXAub3BlbihuYW1lLCBsaW5rKTtcbiAgfSk7XG4gIGNvbnN0IGNhcmRFbCA9IGNhcmRFbGVtZW50LmNyZWF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbDtcbn1cblxuY29uc3QgZGVmYXVsdENhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICBpdGVtczogaW5pdGlhbENhcmRzLFxuICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICBkZWZhdWx0Q2FyZExpc3QuYWRkSXRlbShjcmVhdGVOZXdDYXJkKGl0ZW0pKTtcbiAgfX0sICcuY2FyZHMnKTtcblxuZGVmYXVsdENhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGRhdGEpIHtcbiAgYWRkUG9wdXAuY2xvc2UoKTtcblxuICBkYXRhLm5hbWUgPSBkYXRhLnBsYWNlVmFsdWU7XG4gIGRhdGEubGluayA9IGRhdGEudXJsVmFsdWU7XG4gIGRlZmF1bHRDYXJkTGlzdC5hZGRVc2VySXRlbShjcmVhdGVOZXdDYXJkKGRhdGEpKTtcbn1cblxuY29uc3QgcHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfcHJldmlldycpO1xucHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHVzZXJJbnB1dFNlbGVjdG9yKTtcblxuLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDQvtGC0L/RgNCw0LLQutC4INGE0L7RgNC80Ysg0L/RgNC+0YTQuNC70Y9cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0IChkYXRhKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEubmFtZVZhbHVlLCBkYXRhLmpvYlZhbHVlKTtcbiAgZWRpdFBvcHVwLmNsb3NlKCk7XG59XG5cbi8vINGB0LvRg9GI0LDRgtC10LvRjCDQutC90L7Qv9C60Lgg0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLm5hbWU7XG4gIGpvYklucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLmpvYjtcbiAgZWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vL9GB0LvRg9GI0LDRgtC10LvRjCDQutC90L7Qv9C60Lgg0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4ICjQodC+0LfQtNCw0YLRjClcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgLy8gZG9jdW1lbnQuZm9ybXMuYWRkQ2FyZEZvcm0ucmVzZXQoKTtcbiAgYWRkUG9wdXAub3BlbigpO1xufSk7XG5cbmNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2Zvcm0nKSk7XG5mb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZm9ybVZhbGlkYXRlLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgfSk7XG4gIGNvbnN0IGZvcm1WYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICBmb3JtVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuICBmb3JtVmFsaWRhdGUuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xufSk7XG5cbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfZWRpdCcsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpOyJdLCJzb3VyY2VSb290IjoiIn0=